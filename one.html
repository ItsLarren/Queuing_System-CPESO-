<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Queuing System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #962929 0%, #550555 100%);
            height: 100vh;
            overflow: hidden;
        }

        .page {
            display: none;
            height: 100vh;
            width: 100vw;
        }

        .page.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Stylish Navigation Menu */
        #nav-menu {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-btn {
            margin: 0;
            padding: 15px 25px;
            background: linear-gradient(135deg, #881919 0%, #550555 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1em;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            min-width: 180px;
        }

        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            background: linear-gradient(135deg, #ac4343 0%, #6a0a6a 100%);
        }

        .nav-btn:active {
            transform: translateY(1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Full Screen Client Kiosk Styles */
        .client-body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #962929 0%, #550555 100%);
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .client-container {
            background: white;
            padding: 50px;
            border-radius: 25px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .client-container h2 {
            text-align: center;
            margin-bottom: 40px;
            color: #333;
            font-size: 2.5em;
        }

        .welcome-container {
            text-align: center;
            color: white;
        }

        .welcome-container h1 {
            font-size: 4em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .instruction {
            font-size: 1.5em;
            opacity: 0.8;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 0.4; }
        }

        .button-grid {
            display: grid;
            gap: 20px;
            margin-bottom: 30px;
        }

        .service-btn {
            padding: 25px;
            font-size: 1.5em;
            background: #881919;
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .service-btn:hover {
            background: #ac4343 ;
        }

        .back-btn, .home-btn {
            padding: 15px 25px;
            background: #666;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-size: 1.2em;
        }

        .print-btn {
            padding: 20px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.3em;
            width: 100%;
        }

        .print-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            font-size: 1.2em;
            color: #333;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.1em;
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: #2196F3;
            outline: none;
        }

        .button-group {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 15px;
            margin-top: 40px;
        }

        .ticket-container {
            text-align: center;
        }

        .ticket {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 30px;
            border: 3px dashed #333;
        }

        .ticket-header h2 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .ticket-number {
            font-size: 4em;
            font-weight: bold;
            color: #e74c3c;
            margin: 30px 0;
            padding: 20px;
            border: 4px solid #e74c3c;
            border-radius: 15px;
        }

        .ticket-details {
            text-align: left;
            margin: 30px 0;
            font-size: 1.2em;
        }

        .ticket-details p {
            margin: 15px 0;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .ticket-footer {
            margin-top: 30px;
            padding-top: 15px;
            border-top: 3px solid #333;
            font-style: italic;
            font-size: 1.1em;
        }

        .reset-section {
            margin-top: 40px;
            padding-top: 25px;
            border-top: 3px solid #7f8c8d;
        }

        .reset-btn {
            background: #e74c3c;
            color: white;
            padding: 20px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.3em;
            width: 100%;
            transition: background 0.3s;
        }

        .reset-btn:hover {
            background: #c0392b;
        }

        .confirm-reset {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #34495e;
            border-radius: 12px;
            text-align: center;
        }

        .confirm-buttons {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }

        .confirm-yes {
            background: #e74c3c;
            color: white;
            padding: 15px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            flex: 1;
        }

        .confirm-no {
            background: #7f8c8d;
            color: white;
            padding: 15px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            flex: 1;
        }

        /* Priority client styles */
        .priority-btn {
            background: #e67e22 !important;
            border: 3px solid #d35400 !important;
            position: relative;
            overflow: hidden;
        }

        .priority-btn:hover {
            background: #f39c12 !important;
        }

        .priority-btn::before {
            content: "üïê PRIORITY";
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255,255,255,0.2);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7em;
            font-weight: bold;
        }

        /* Priority ticket styles */
        .priority-ticket {
            border: 3px solid #e67e22 !important;
            background: linear-gradient(135deg, #fffaf0 0%, #ffeaa7 100%) !important;
        }

        .priority-badge {
            background: #e67e22;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
            display: inline-block;
            margin-bottom: 10px;
        }

        /* Employee panel priority styles */
        .priority-queue {
            border-left: 5px solid #e67e22 !important;
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%) !important;
        }

        .priority-number {
            color: #e67e22 !important;
            font-weight: bold;
        }

        /* Display Monitor Styles - FULL SCREEN */
        .display-body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: white;
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 40px;
        }

        .display-header {
            background: #e74c3c;
            padding: 30px;
            text-align: center;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .display-header h1 {
            font-size: 4em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .current-serving {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .display-current-number {
            font-size: 12em;
            font-weight: bold;
            color: #e74c3c;
            text-shadow: 0 0 50px rgba(231, 76, 60, 0.7);
            margin: 40px 0;
        }

        .display-current-service {
            font-size: 3em;
            color: #ecf0f1;
            text-align: center;
        }

        .display-queue-list {
            background: #2c3e50;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .display-queue-list h3 {
            text-align: center;
            margin-bottom: 20px;
            color: #bdc3c7;
            font-size: 2em;
        }

        .display-next-numbers {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .display-next-number {
            background: #34495e;
            padding: 20px 35px;
            border-radius: 15px;
            font-size: 2.5em;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .blink {
            animation: blink 1s infinite;
        }

        /* Employee Panel Styles - FULL SCREEN */
        .employee-body {
            font-family: Arial, sans-serif;
            background: #2c3e50;
            color: white;
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            padding: 40px;
        }

        .employee-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .employee-header h1 {
            font-size: 3em;
            color: #ecf0f1;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .employee-main {
            display: flex;
            flex: 1;
            gap: 40px;
        }

        .employee-current-section {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .employee-current-number {
            background: #e74c3c;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .employee-current-number h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        .employee-display-number {
            font-size: 6em;
            font-weight: bold;
            margin: 30px 0;
        }

        .employee-control-panel {
            background: #34495e;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            flex: 1;
        }

        .employee-control-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .employee-control-btn {
            padding: 25px;
            font-size: 1.5em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: transform 0.2s, background 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .employee-control-btn:hover {
            transform: scale(1.05);
        }

        .employee-control-btn:active {
            transform: scale(0.95);
        }

        .employee-done-btn {
            background: #27ae60;
            color: white;
        }

        .employee-call-btn {
            background: #f39c12;
            color: white;
        }

        .employee-noshow-btn {
            background: #95a5a6;
            color: white;
        }

        .employee-queue-section {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .employee-queue-list {
            background: #2c3e50;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            flex: 1;
            overflow-y: auto;
        }

        .employee-queue-list h3 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 2em;
            color: #ecf0f1;
        }

        .employee-queue-item {
            padding: 20px;
            margin: 15px 0;
            background: #34495e;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .employee-queue-number {
            font-weight: bold;
            font-size: 1.5em;
        }

        .employee-queue-service {
            color: #bdc3c7;
            font-size: 1.2em;
        }

        .employee-status-called {
            border-left: 8px solid #f39c12;
        }

        .employee-status-serving {
            border-left: 8px solid #27ae60;
        }

        .employee-status-waiting {
            border-left: 8px solid #3498db;
        }

        .employee-status-noshow {
            border-left: 8px solid #95a5a6;
            opacity: 0.6;
        }

        /* Admin Panel Styles - FULL SCREEN */
        .admin-body {
            font-family: Arial, sans-serif;
            background: #34495e;
            color: white;
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .admin-container {
            background: #2c3e50;
            padding: 50px;
            border-radius: 25px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
            text-align: center;
            width: 90%;
            max-width: 800px;
        }

        .admin-container h1 {
            font-size: 3.5em;
            margin-bottom: 40px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .admin-stats {
            background: #34495e;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
            text-align: left;
            font-size: 1.3em;
        }

        .admin-stats h3 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.8em;
            color: #ecf0f1;
        }

        .admin-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .admin-reset-btn {
            background: #e74c3c;
            color: white;
            padding: 20px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.3em;
            transition: background 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .admin-reset-btn:hover {
            background: #c0392b;
        }

        .admin-auto-reset-btn {
            background: #3498db;
        }

        .admin-auto-reset-btn:hover {
            background: #2980b9;
        }

        .admin-confirm-dialog {
            display: none;
            margin-top: 30px;
            padding: 30px;
            background: #34495e;
            border-radius: 15px;
            font-size: 1.2em;
        }

        .admin-confirm-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .admin-confirm-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            flex: 1;
            font-size: 1.2em;
        }

        .admin-confirm-yes {
            background: #e74c3c;
            color: white;
        }

        .admin-confirm-no {
            background: #7f8c8d;
            color: white;
        }

        .admin-success-message {
            display: none;
            background: #27ae60;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            font-size: 1.3em;
        }

        /* Outside location styles */
        .outside-location {
            background: #fff3cd !important;
            border-left: 8px solid #ffc107 !important;
        }

        .outside-badge {
            background: #ffc107;
            color: #856404;
            padding: 5px 12px;
            border-radius: 12px;
            font-size: 0.9em;
            font-weight: bold;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <!-- Main Queuing System - FULL SCREEN -->
    <div id="welcome-page" class="page active">
        <div class="client-body">
            <div class="welcome-container">
                <h1>Get Your Number Here</h1>
                <p class="instruction">Touch anywhere to continue</p>
            </div>
        </div>
    </div>

    <div id="service-page" class="page">
        <div class="client-body">
            <div class="client-container">
                <h2>Select Service</h2>
                <div class="button-grid">
                    <button class="service-btn" onclick="selectService('Mayors Working Permit')">
                        Mayors Working Permit
                    </button>
                    <button class="service-btn" onclick="selectService('Mayors Clearance')">
                        Mayors Clearance
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="subservice-page" class="page">
        <div class="client-body">
            <div class="client-container">
                <h2 id="subservice-title">Select Option</h2>
                <div class="button-grid">
                    <button class="service-btn" onclick="selectSubService('Newly Hired')">
                        Newly Hired
                    </button>
                    <button class="service-btn" onclick="selectSubService('Renew')">
                        Renew
                    </button>
                </div>
                <button class="back-btn" onclick="goBack()">Back</button>
            </div>
        </div>
    </div>

    <div id="client-type-page" class="page">
        <div class="client-body">
            <div class="client-container">
                <h2>Select Client Type</h2>
                <div class="button-grid">
                    <button class="service-btn priority-btn" onclick="selectClientType('Senior/PWD')">
                        üëµ Senior Citizen / ‚ôø PWD
                    </button>
                    <button class="service-btn" onclick="selectClientType('Regular')">
                        Regular Client
                    </button>
                </div>
                <button class="back-btn" onclick="goBack()">Back</button>
            </div>
        </div>
    </div>

    <div id="form-page" class="page">
        <div class="client-body">
            <div class="client-container">
                <h2>Please Fill Up the Form</h2>
                <form id="customer-form">
                    <div class="form-group">
                        <label for="name">Full Name:</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="address">Address:</label>
                        <input type="text" id="address" name="address" required placeholder="HOUSE NO., STREET, VILLAGE">
                    </div>
                    <div class="form-group">
                        <label for="barangay">Barangay:</label>
                        <select id="barangay" name="barangay" required onchange="toggleCityInput()">
                            <option value="">Select Barangay</option>
                            <option value="Alasa">Alasa</option>
                            <option value="Baliti">Baliti</option>
                            <option value="Bulaon">Bulaon</option>
                            <option value="Calulut">Calulut</option>
                            <option value="Del Carmen">Del Carmen</option>
                            <option value="Del Pilar">Del Pilar</option>
                            <option value="Del Rosario">Del Rosario</option>
                            <option value="Dela Paz Norte">Dela Paz Norte</option>
                            <option value="Dela Paz Sur">Dela Paz Sur</option>
                            <option value="Dolores">Dolores</option>
                            <option value="Juliana">Juliana</option>
                            <option value="Lara">Lara</option>
                            <option value="Lourdes">Lourdes</option>
                            <option value="Magliman">Magliman</option>
                            <option value="Maimpis">Maimpis</option>
                            <option value="Malino">Malino</option>
                            <option value="Malpitic">Malpitic</option>
                            <option value="Pandaras">Pandaras</option>
                            <option value="Panipuan">Panipuan</option>
                            <option value="Pulung Bulu">Pulung Bulu</option>
                            <option value="Quebiauan">Quebiauan</option>
                            <option value="Saguin">Saguin</option>
                            <option value="San Agustin">San Agustin</option>
                            <option value="San Felipe">San Felipe</option>
                            <option value="San Isidro">San Isidro</option>
                            <option value="San Jose">San Jose</option>
                            <option value="San Juan">San Juan</option>
                            <option value="San Nicolas">San Nicolas</option>
                            <option value="San Pedro">San Pedro</option>
                            <option value="Santa Lucia">Santa Lucia</option>
                            <option value="Santa Teresita">Santa Teresita</option>
                            <option value="Santo Ni√±o">Santo Ni√±o</option>
                            <option value="Santo Rosario">Santo Rosario</option>
                            <option value="Sindalan">Sindalan</option>
                            <option value="Telebastagan">Telebastagan</option>
                            <option value="OTHER">Other (Outside SF Pampanga)</option>
                        </select>

                        <div id="outside-fields" style="display: none;">
                        <div class="form-group">
                            <label for="custom-barangay">Barangay (Outside SF):</label>
                            <input type="text" id="custom-barangay" name="custom-barangay" placeholder="Enter your barangay">
                        </div>
                        <div class="form-group">
                            <label for="city">City/Municipality:</label>
                            <input type="text" id="city" name="city" placeholder="Enter your city/municipality">
                        </div>
                        <div class="form-group">
                            <label for="province">Province:</label>
                            <input type="text" id="province" name="province" placeholder="Enter your province">
                        </div>
                    </div>
                    </div>
                    <div class="button-group">
                        <button type="button" class="back-btn" onclick="goBack()">Back</button>
                        <button type="button" id="print-btn" class="print-btn" disabled onclick="generateTicket()">
                            Print Number
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="ticket-page" class="page">
        <div class="client-body">
            <div class="client-container">
                <div class="ticket-container">
                    <div class="ticket" id="printed-ticket">
                        <div class="ticket-header">
                            <h2>OFFICE OF THE MAYOR</h2>
                            <p>Queuing Ticket</p>
                        </div>
                        <div class="ticket-body">
                            <div class="ticket-number">
                                <span id="queue-number">A001</span>
                            </div>
                            <div class="ticket-details">
                                <p><strong>Service:</strong> <span id="ticket-service"></span></p>
                                <p><strong>Type:</strong> <span id="ticket-type"></span></p>
                                <p><strong>Client Type:</strong> <span id="ticket-client-type"></span></p>
                                <p><strong>Name:</strong> <span id="ticket-name"></span></p>
                                <p><strong>Barangay:</strong> <span id="ticket-barangay"></span></p>
                                <p><strong>Date:</strong> <span id="ticket-date"></span></p>
                            </div>
                        </div>
                        <div class="ticket-footer">
                            <p>Please wait for your number to be called</p>
                        </div>
                    </div>
                    <button class="home-btn" onclick="goToWelcome()">Get Another Number</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Display Monitor - FULL SCREEN -->
    <div id="display-page" class="page">
        <div class="display-body">
            <div class="display-header">
                <h1>NOW SERVING</h1>
            </div>

            <div class="current-serving">
                <div class="display-current-number" id="display-current-number">---</div>
                <div class="display-current-service" id="display-current-service">Please wait for your number to be called</div>
            </div>

            <div class="display-queue-list">
                <h3>Next Numbers</h3>
                <div class="display-next-numbers" id="display-next-numbers">
                    <!-- Next numbers will appear here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Employee Panel - FULL SCREEN -->
    <div id="employee-page" class="page">
        <div class="employee-body">
            <div class="employee-header">
                <h1>EMPLOYEE CONTROL PANEL</h1>
            </div>
            
            <div class="employee-main">
                <div class="employee-current-section">
                    <div class="employee-current-number">
                        <h2>NOW SERVING</h2>
                        <div class="employee-display-number" id="employee-display-number">---</div>
                        <p id="employee-current-service">No one is currently being served</p>
                    </div>

                    <div class="employee-control-panel">
                        <div class="employee-control-buttons">
                            <button class="employee-control-btn employee-done-btn" onclick="markDone()">
                                ‚úÖ Done
                            </button>
                            <button class="employee-control-btn employee-call-btn" onclick="callNext()">
                                üîî Call Next
                            </button>
                            <button class="employee-control-btn employee-noshow-btn" onclick="markNoShow()">
                                ‚ùå No Show
                            </button>
                        </div>

                        <div class="reset-section">
                            <button class="reset-btn" onclick="showResetConfirmation()">
                                üîÑ Reset System for Tomorrow
                            </button>
                            <div class="confirm-reset" id="confirm-reset">
                                <p>Are you sure you want to reset the system? This will clear all queue data and start fresh.</p>
                                <div class="confirm-buttons">
                                    <button class="confirm-yes" onclick="resetSystem()">Yes, Reset</button>
                                    <button class="confirm-no" onclick="hideResetConfirmation()">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="employee-queue-section">
                    <div class="employee-queue-list">
                        <h3>Queue List</h3>
                        <div id="employee-queue-list">
                            <!-- Queue items will be dynamically added here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel - FULL SCREEN -->
    <div id="admin-page" class="page">
        <div class="admin-body">
            <div class="admin-container">
                <h1>System Administration</h1>
                
                <div class="admin-stats" id="system-stats">
                    <h3>Current System Status</h3>
                    <p id="queue-count">Loading...</p>
                    <p id="serving-number">Loading...</p>
                    <p id="last-reset">Loading...</p>
                </div>

                <div class="admin-buttons">
                    <button class="admin-reset-btn" onclick="showAdminResetConfirmation()">
                        üîÑ Reset System for Tomorrow
                    </button>

                    <button class="admin-reset-btn admin-auto-reset-btn" onclick="enableAutoReset()">
                        ‚öôÔ∏è Enable Auto Daily Reset
                    </button>
                </div>

                <div class="admin-confirm-dialog" id="admin-confirm-dialog">
                    <p><strong>Are you sure you want to reset the system?</strong></p>
                    <p>This will:</p>
                    <ul style="text-align: left; margin: 10px 0; padding-left: 20px;">
                        <li>Clear all queue data</li>
                        <li>Reset all numbers to 001</li>
                        <li>Clear current serving number</li>
                    </ul>
                    <p>This action cannot be undone.</p>
                    <div class="admin-confirm-buttons">
                        <button class="admin-confirm-btn admin-confirm-yes" onclick="adminResetSystem()">Yes, Reset System</button>
                        <button class="admin-confirm-btn admin-confirm-no" onclick="hideAdminResetConfirmation()">Cancel</button>
                    </div>
                </div>

                <div class="admin-success-message" id="admin-success-message">
                    ‚úÖ System has been reset successfully!
                </div>
            </div>
        </div>
    </div>

    <!-- Stylish Navigation Menu -->
    <div id="nav-menu">
        <button class="nav-btn" onclick="showSystem('welcome')">Client Kiosk</button>
        <button class="nav-btn" onclick="showSystem('display')">Display Monitor</button>
        <button class="nav-btn" onclick="showSystem('employee')">Employee Panel</button>
        <button class="nav-btn" onclick="showSystem('admin')">Admin Panel</button>
    </div>

    <audio id="bell-sound" src="bell.mp3" preload="auto">
        <source src="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAABAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AAABQTEFNRTMuMTAwBKkAAAAAAAAAADUgJAOQHgAAgAAABnG0bFyRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQZAAP8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAETEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV" type="audio/mpeg">
    </audio>


    <script>
        // Global variables
        let currentService = '';
        let currentSubService = '';
        let currentClientType = '';

        // Initialize queue numbers with persistence
        function initializeQueueNumbers() {
            const saved = localStorage.getItem('queueNumbers');
            if (saved) {
                return JSON.parse(saved);
            } else {
                return {
                    'Mayors Working Permit': { 
                        'Newly Hired': { 'Senior/PWD': 1, 'Regular': 1 },
                        'Renew': { 'Senior/PWD': 1, 'Regular': 1 }
                    },
                    'Mayors Clearance': { 
                        'Newly Hired': { 'Senior/PWD': 1, 'Regular': 1 },
                        'Renew': { 'Senior/PWD': 1, 'Regular': 1 }
                    }
                };
            }
        }

        let queueNumbers = initializeQueueNumbers();
        let currentQueue = JSON.parse(localStorage.getItem('currentQueue') || '[]');
        let servingIndex = parseInt(localStorage.getItem('servingIndex') || '-1');
        let lastResetDate = localStorage.getItem('lastResetDate') || new Date().toDateString();

        // Navigation functions
        function showSystem(system) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(`${system}-page`).classList.add('active');
            
            // Update the relevant display when switching to these pages
            if (system === 'display') {
                updateDisplay();
            } else if (system === 'employee') {
                updateEmployeePanel();
            } else if (system === 'admin') {
                updateAdminStats();
            }
        }

        // Welcome page touch to continue
        document.getElementById('welcome-page').addEventListener('click', function() {
            showPage('service-page');
        });

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }

        function goBack() {
            const currentPage = document.querySelector('.page.active').id;
            
            if (currentPage === 'service-page') {
                showPage('welcome-page');
            } else if (currentPage === 'subservice-page') {
                showPage('service-page');
            } else if (currentPage === 'client-type-page') {
                showPage('subservice-page');
            } else if (currentPage === 'form-page') {
                showPage('client-type-page');
            }
        }

        function goToWelcome() {
            showPage('welcome-page');
            // Reset form
            document.getElementById('customer-form').reset();
            document.getElementById('print-btn').disabled = true;
        }

        function selectService(service) {
            currentService = service;
            document.getElementById('subservice-title').textContent = `Select Option for ${service}`;
            showPage('subservice-page');
        }

        function selectSubService(subService) {
            currentSubService = subService;
            showPage('client-type-page');
        }

        function selectClientType(clientType) {
            currentClientType = clientType;
            showPage('form-page');
        }

        // Form validation
        function toggleCityInput() {
            const barangaySelect = document.getElementById('barangay');
            const outsideFields = document.getElementById('outside-fields');
            const printBtn = document.getElementById('print-btn');
            
            if (barangaySelect.value === 'OTHER') {
                outsideFields.style.display = 'block';
            } else {
                outsideFields.style.display = 'none';
            }
            
            // Enable print button if form is valid
            validateForm();
        }

        function validateForm() {
            const name = document.getElementById('name').value;
            const address = document.getElementById('address').value;
            const barangay = document.getElementById('barangay').value;
            const printBtn = document.getElementById('print-btn');
            
            let isValid = name.trim() !== '' && address.trim() !== '' && barangay !== '';
            
            if (barangay === 'OTHER') {
                const customBarangay = document.getElementById('custom-barangay').value;
                const city = document.getElementById('city').value;
                const province = document.getElementById('province').value;
                isValid = isValid && customBarangay.trim() !== '' && city.trim() !== '' && province.trim() !== '';
            }
            
            printBtn.disabled = !isValid;
        }

        // Add event listeners for form validation
        document.getElementById('name').addEventListener('input', validateForm);
        document.getElementById('address').addEventListener('input', validateForm);
        document.getElementById('barangay').addEventListener('change', validateForm);
        document.getElementById('custom-barangay').addEventListener('input', validateForm);
        document.getElementById('city').addEventListener('input', validateForm);
        document.getElementById('province').addEventListener('input', validateForm);

        // Ticket generation
        function generateTicket() {
            const name = document.getElementById('name').value;
            const address = document.getElementById('address').value;
            let barangay = document.getElementById('barangay').value;
            
            if (barangay === 'OTHER') {
                barangay = document.getElementById('custom-barangay').value;
            }
            
            // Get the next queue number
            const queueNumber = getNextQueueNumber();
            
            // Add to queue
            const ticket = {
                number: queueNumber,
                service: currentService,
                subService: currentSubService,
                clientType: currentClientType,
                name: name,
                address: address,
                barangay: barangay,
                timestamp: new Date(),
                status: 'waiting'
            };
            
            currentQueue.push(ticket);
            localStorage.setItem('currentQueue', JSON.stringify(currentQueue));
            
            // Update display
            updateDisplay();
            updateEmployeePanel();
            
            // Show ticket
            document.getElementById('queue-number').textContent = queueNumber;
            document.getElementById('ticket-service').textContent = `${currentService} - ${currentSubService}`;
            document.getElementById('ticket-type').textContent = currentSubService;
            document.getElementById('ticket-client-type').textContent = currentClientType;
            document.getElementById('ticket-name').textContent = name;
            document.getElementById('ticket-barangay').textContent = barangay;
            document.getElementById('ticket-date').textContent = new Date().toLocaleDateString();
            
            // Apply priority styling if applicable
            const ticketElement = document.getElementById('printed-ticket');
            if (currentClientType === 'Senior/PWD') {
                ticketElement.classList.add('priority-ticket');
            } else {
                ticketElement.classList.remove('priority-ticket');
            }
            
            showPage('ticket-page');
        }

        function getNextQueueNumber() {
            // Get current number for this service combination
            let number = queueNumbers[currentService][currentSubService][currentClientType];
            
            // Format number with prefix
            let prefix = '';
            if (currentClientType === 'Senior/PWD') {
                prefix = 'P'; // Priority
            } else {
                prefix = 'R'; // Regular
            }
            
            const formattedNumber = `${prefix}${number.toString().padStart(3, '0')}`;
            
            // Increment for next time
            queueNumbers[currentService][currentSubService][currentClientType]++;
            localStorage.setItem('queueNumbers', JSON.stringify(queueNumbers));
            
            return formattedNumber;
        }

        // Employee panel functions
        function callNext() {
            if (currentQueue.length === 0) {
                alert('No customers in queue!');
                return;
            }
            
            // Find next waiting customer
            let nextIndex = -1;
            for (let i = 0; i < currentQueue.length; i++) {
                if (currentQueue[i].status === 'waiting') {
                    nextIndex = i;
                    break;
                }
            }
            
            if (nextIndex === -1) {
                alert('No more waiting customers!');
                return;
            }
            
            // Update status
            currentQueue[nextIndex].status = 'called';
            servingIndex = nextIndex;
            localStorage.setItem('currentQueue', JSON.stringify(currentQueue));
            localStorage.setItem('servingIndex', servingIndex);
            
            // Play bell sound
            const bellSound = document.getElementById('bell-sound');
            bellSound.play().catch(e => console.log('Audio play failed:', e));
            
            // Update displays
            updateDisplay();
            updateEmployeePanel();
        }

        function markDone() {
            if (servingIndex === -1 || currentQueue.length === 0) {
                alert('No customer is currently being served!');
                return;
            }
            
            // Remove from queue
            currentQueue.splice(servingIndex, 1);
            servingIndex = -1;
            localStorage.setItem('currentQueue', JSON.stringify(currentQueue));
            localStorage.setItem('servingIndex', servingIndex);
            
            // Update displays
            updateDisplay();
            updateEmployeePanel();
        }

        function markNoShow() {
            if (servingIndex === -1 || currentQueue.length === 0) {
                alert('No customer is currently being served!');
                return;
            }
            
            // Mark as no show
            currentQueue[servingIndex].status = 'noshow';
            servingIndex = -1;
            localStorage.setItem('currentQueue', JSON.stringify(currentQueue));
            localStorage.setItem('servingIndex', servingIndex);
            
            // Update displays
            updateDisplay();
            updateEmployeePanel();
        }

        // Display update functions
        function updateDisplay() {
            // Update current serving
            const displayCurrentNumber = document.getElementById('display-current-number');
            const displayCurrentService = document.getElementById('display-current-service');
            
            if (servingIndex !== -1 && currentQueue[servingIndex]) {
                const serving = currentQueue[servingIndex];
                displayCurrentNumber.textContent = serving.number;
                displayCurrentService.textContent = `${serving.service} - ${serving.subService}`;
                
                // Add blink animation
                displayCurrentNumber.classList.add('blink');
            } else {
                displayCurrentNumber.textContent = '---';
                displayCurrentService.textContent = 'Please wait for your number to be called';
                
                // Remove blink animation
                displayCurrentNumber.classList.remove('blink');
            }
            
            // Update next numbers
            updateNextNumbers();
        }

        function updateNextNumbers() {
            const displayNextNumbers = document.getElementById('display-next-numbers');
            displayNextNumbers.innerHTML = '';
            
            // Get next 3 waiting customers
            let count = 0;
            for (let i = 0; i < currentQueue.length && count < 3; i++) {
                if (currentQueue[i].status === 'waiting') {
                    const numberElement = document.createElement('div');
                    numberElement.className = 'display-next-number';
                    numberElement.textContent = currentQueue[i].number;
                    displayNextNumbers.appendChild(numberElement);
                    count++;
                }
            }
            
            // Fill remaining slots with placeholders if needed
            while (count < 3) {
                const numberElement = document.createElement('div');
                numberElement.className = 'display-next-number';
                numberElement.textContent = '---';
                numberElement.style.opacity = '0.5';
                displayNextNumbers.appendChild(numberElement);
                count++;
            }
        }

        // MISSING FUNCTION: updateEmployeePanel
        function updateEmployeePanel() {
            const employeeDisplayNumber = document.getElementById('employee-display-number');
            const employeeCurrentService = document.getElementById('employee-current-service');
            
            if (servingIndex !== -1 && currentQueue[servingIndex]) {
                const serving = currentQueue[servingIndex];
                employeeDisplayNumber.textContent = serving.number;
                employeeCurrentService.textContent = `${serving.service} - ${serving.subService}`;
                
                // Add blink animation
                employeeDisplayNumber.classList.add('blink');
            } else {
                employeeDisplayNumber.textContent = '---';
                employeeCurrentService.textContent = 'No one is currently being served';
                
                // Remove blink animation
                employeeDisplayNumber.classList.remove('blink');
            }
            
            // Update queue list
            updateQueueList();
        }

        function updateQueueList() {
            const employeeQueueList = document.getElementById('employee-queue-list');
            employeeQueueList.innerHTML = '';
            
            if (currentQueue.length === 0) {
                const emptyMessage = document.createElement('div');
                emptyMessage.className = 'employee-queue-item';
                emptyMessage.innerHTML = '<p>No customers in queue</p>';
                employeeQueueList.appendChild(emptyMessage);
                return;
            }
            
            currentQueue.forEach((ticket, index) => {
                const queueItem = document.createElement('div');
                queueItem.className = `employee-queue-item employee-status-${ticket.status}`;
                
                // Add priority styling for Senior/PWD
                if (ticket.clientType === 'Senior/PWD') {
                    queueItem.classList.add('priority-queue');
                }
                
                // Add outside location styling
                if (ticket.barangay && ![
                    'Alasa', 'Baliti', 'Bulaon', 'Calulut', 'Del Carmen', 'Del Pilar', 'Del Rosario',
                    'Dela Paz Norte', 'Dela Paz Sur', 'Dolores', 'Juliana', 'Lara', 'Lourdes',
                    'Magliman', 'Maimpis', 'Malino', 'Malpitic', 'Pandaras', 'Panipuan',
                    'Pulung Bulu', 'Quebiauan', 'Saguin', 'San Agustin', 'San Felipe',
                    'San Isidro', 'San Jose', 'San Juan', 'San Nicolas', 'San Pedro',
                    'Santa Lucia', 'Santa Teresita', 'Santo Ni√±o', 'Santo Rosario',
                    'Sindalan', 'Telebastagan'
                ].includes(ticket.barangay)) {
                    queueItem.classList.add('outside-location');
                }
                
                let statusText = '';
                switch(ticket.status) {
                    case 'waiting': statusText = 'Waiting'; break;
                    case 'called': statusText = 'Called'; break;
                    case 'serving': statusText = 'Serving'; break;
                    case 'noshow': statusText = 'No Show'; break;
                }
                
                let locationBadge = '';
                if (ticket.barangay && ![
                    'Alasa', 'Baliti', 'Bulaon', 'Calulut', 'Del Carmen', 'Del Pilar', 'Del Rosario',
                    'Dela Paz Norte', 'Dela Paz Sur', 'Dolores', 'Juliana', 'Lara', 'Lourdes',
                    'Magliman', 'Maimpis', 'Malino', 'Malpitic', 'Pandaras', 'Panipuan',
                    'Pulung Bulu', 'Quebiauan', 'Saguin', 'San Agustin', 'San Felipe',
                    'San Isidro', 'San Jose', 'San Juan', 'San Nicolas', 'San Pedro',
                    'Santa Lucia', 'Santa Teresita', 'Santo Ni√±o', 'Santo Rosario',
                    'Sindalan', 'Telebastagan'
                ].includes(ticket.barangay)) {
                    locationBadge = '<span class="outside-badge">Outside SF</span>';
                }
                
                queueItem.innerHTML = `
                    <div>
                        <div class="employee-queue-number ${ticket.clientType === 'Senior/PWD' ? 'priority-number' : ''}">
                            ${ticket.number} ${locationBadge}
                        </div>
                        <div class="employee-queue-service">
                            ${ticket.service} - ${ticket.subService}
                        </div>
                    </div>
                    <div>
                        <span>${statusText}</span>
                    </div>
                `;
                
                employeeQueueList.appendChild(queueItem);
            });
        }

        // Reset functions
        function showResetConfirmation() {
            document.getElementById('confirm-reset').style.display = 'block';
        }

        function hideResetConfirmation() {
            document.getElementById('confirm-reset').style.display = 'none';
        }

        function resetSystem() {
            // Reset queue numbers
            queueNumbers = {
                'Mayors Working Permit': { 
                    'Newly Hired': { 'Senior/PWD': 1, 'Regular': 1 },
                    'Renew': { 'Senior/PWD': 1, 'Regular': 1 }
                },
                'Mayors Clearance': { 
                    'Newly Hired': { 'Senior/PWD': 1, 'Regular': 1 },
                    'Renew': { 'Senior/PWD': 1, 'Regular': 1 }
                }
            };
            
            // Clear current queue
            currentQueue = [];
            servingIndex = -1;
            
            // Update last reset date
            lastResetDate = new Date().toDateString();
            
            // Save to localStorage
            localStorage.setItem('queueNumbers', JSON.stringify(queueNumbers));
            localStorage.setItem('currentQueue', JSON.stringify(currentQueue));
            localStorage.setItem('servingIndex', servingIndex);
            localStorage.setItem('lastResetDate', lastResetDate);
            
            // Update displays
            updateDisplay();
            updateEmployeePanel();
            
            // Hide confirmation
            hideResetConfirmation();
            
            alert('System has been reset successfully!');
        }

        // Admin panel functions
        function showAdminResetConfirmation() {
            document.getElementById('admin-confirm-dialog').style.display = 'block';
        }

        function hideAdminResetConfirmation() {
            document.getElementById('admin-confirm-dialog').style.display = 'none';
        }

        function adminResetSystem() {
            resetSystem();
            document.getElementById('admin-success-message').style.display = 'block';
            setTimeout(() => {
                document.getElementById('admin-success-message').style.display = 'none';
            }, 3000);
            hideAdminResetConfirmation();
            updateAdminStats();
        }

        function enableAutoReset() {
            alert('Auto daily reset feature enabled! The system will automatically reset at midnight.');
            // In a real implementation, you would set up a daily timer here
        }

        function updateAdminStats() {
            const queueCount = currentQueue.length;
            const servingNumber = servingIndex !== -1 && currentQueue[servingIndex] ? 
                currentQueue[servingIndex].number : 'None';
            
            document.getElementById('queue-count').textContent = `Customers in queue: ${queueCount}`;
            document.getElementById('serving-number').textContent = `Currently serving: ${servingNumber}`;
            document.getElementById('last-reset').textContent = `Last reset: ${lastResetDate}`;
        }

        // Initialize the system
        function initializeSystem() {
            updateDisplay();
            updateEmployeePanel();
            updateAdminStats();
            
            // Check if we need to auto-reset (if it's a new day)
            const today = new Date().toDateString();
            if (today !== lastResetDate) {
                // Auto-reset for new day
                resetSystem();
            }
        }

        // Call initialization when page loads
        window.onload = initializeSystem;
    </script>
</body>
</html>