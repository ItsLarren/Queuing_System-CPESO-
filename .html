function updateClientStats() {
    // Reset all stats to zero
    clientStats.csfp = 0;
    clientStats.nonCsfp = 0;
    clientStats.ftj = 0;
    
    // List of CSFP barangays (from your dropdown)
    const csfpBarangays = [
        'Alasas', 'Baliti', 'Bulaon', 'Calulut', 'Del Carmen', 'Del Pilar', 
        'Del Rosario', 'Dela Paz Norte', 'Dela Paz Sur', 'Dolores', 'Juliana', 
        'Lara', 'Lourdes', 'Magliman', 'Maimpis', 'Malino', 'Malpitic', 
        'Pandaras', 'Panipuan', 'Pulung Bulu', 'Quebiauan', 'Saguin', 
        'San Agustin', 'San Felipe', 'San Isidro', 'San Jose', 'San Juan', 
        'San Nicolas', 'San Pedro', 'Santa Lucia', 'Santa Teresita', 
        'Santo NiÃ±o', 'Santo Rosario', 'Sindalan', 'Telebastagan'
    ];
    
    // ONLY count clients from the "done" queue who were actually served
    for (const service in queueData) {
        for (const subService in queueData[service]) {
            const doneQueue = queueData[service][subService].done;
            
            // Process done queue - only count clients with status 'served'
            doneQueue.forEach(item => {
                if (item.status === 'served') { // ONLY count served clients
                    if (item.clientType === 'FTJ') {
                        clientStats.ftj++;
                    } else {
                        // Check if barangay is in CSFP list
                        const isCsfp = csfpBarangays.some(barangay => 
                            item.barangay.includes(barangay) || 
                            (item.barangay === barangay)
                        );
                        
                        if (isCsfp) {
                            clientStats.csfp++;
                        } else {
                            clientStats.nonCsfp++;
                        }
                    }
                }
                // Skip noshow_removed clients and any other status
            });
        }
    }
    
    localStorage.setItem('clientStats', JSON.stringify(clientStats));
    
    updateAdminStats();
    updateFinancialStats();
}